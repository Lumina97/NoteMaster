{"version":3,"file":"content.js","mappings":"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","sources":["webpack://notemaster/./src/HTMLCreator.ts","webpack://notemaster/./src/NoteManager.ts","webpack://notemaster/./src/Types.ts","webpack://notemaster/./src/main.ts","webpack://notemaster/./src/noteDisplayOverlay.ts","webpack://notemaster/./src/resize.ts","webpack://notemaster/webpack/bootstrap","webpack://notemaster/webpack/startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createNewNoteHTML = exports.SetHTMLClasses = void 0;\nconst main_1 = require(\"./main\");\nconst noteDisplayOverlay_1 = require(\"./noteDisplayOverlay\");\nconst NoteManager_1 = require(\"./NoteManager\");\nconst SetHTMLClasses = (note, CurrentNoteOverlayStyle) => {\n    note.trashIconHTML.className = \"\";\n    note.noteIconHTML.className = \"\";\n    note.textAreaHTML.className = \"\";\n    note.wrapperHTML.className = \"\";\n    note.wrapperHTML.style.cssText = \"\";\n    note.wrapperHTML.classList.add(`Note${(0, main_1.GetPageNotes)().length}`);\n    if (CurrentNoteOverlayStyle === noteDisplayOverlay_1.ENoteOverlayStyle.sidebar) {\n        note.trashIconHTML.classList.add(\"noteTrashIconSideBar\");\n        note.noteIconHTML.classList.add(\"noteDisplayIconSideBar\");\n        note.textAreaHTML.classList.add(\"noteTextAreaSideBar\");\n        note.wrapperHTML.classList.add(\"noteWrapperElementSideBar\");\n    }\n    else {\n        note.trashIconHTML.classList.add(\"noteTrashIcon\");\n        note.noteIconHTML.classList.add(\"noteDisplayIcon\");\n        note.textAreaHTML.classList.add(\"noteTextArea\");\n        note.wrapperHTML.classList.add(\"noteWrapperElement\");\n        note.wrapperHTML.style.width = note.width;\n        note.wrapperHTML.style.height = note.height;\n        note.wrapperHTML.style.left = note.left;\n    }\n    note.wrapperHTML.style.top = note.top;\n};\nexports.SetHTMLClasses = SetHTMLClasses;\n///Returns a note obj\nconst createNewNoteHTML = (width, height, left, top, content) => {\n    let Note;\n    const wrapper = document.createElement(\"div\");\n    const noteIcon = document.createElement(\"button\");\n    const trashIcon = document.createElement(\"button\");\n    const textArea = document.createElement(\"textarea\");\n    textArea.value = content ? content : \"Enter your note here\";\n    trashIcon.addEventListener(\"click\", () => {\n        (0, NoteManager_1.deleteNote)(Note);\n    });\n    noteIcon.addEventListener(\"click\", () => {\n        const toggle = textArea.classList.contains(\"closedOverlay\");\n        (0, NoteManager_1.toggleNote)(textArea, !toggle);\n    });\n    textArea.addEventListener(\"change\", (e) => {\n        textArea.innerHTML = e.target.value;\n    });\n    wrapper.appendChild(noteIcon);\n    wrapper.appendChild(trashIcon);\n    wrapper.appendChild(textArea);\n    Note = {\n        width,\n        height,\n        top,\n        left,\n        content: textArea.value,\n        wrapperHTML: wrapper,\n        textAreaHTML: textArea,\n        noteIconHTML: noteIcon,\n        trashIconHTML: trashIcon,\n    };\n    (0, exports.SetHTMLClasses)(Note, (0, noteDisplayOverlay_1.GetCurrentNoteOverlayStyle)());\n    return Note;\n};\nexports.createNewNoteHTML = createNewNoteHTML;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.convertAbsoluteToRelativePosition = exports.calculateNoteWidthInPx = exports.calculateNoteHeightInPx = exports.createNoteForSelectedText = exports.setAllNotesDisplay = exports.toggleNote = exports.deleteNote = void 0;\nconst HTMLCreator_1 = require(\"./HTMLCreator\");\nconst main_1 = require(\"./main\");\nconst noteDisplayOverlay_1 = require(\"./noteDisplayOverlay\");\nconst deleteNote = (noteWrapperElement) => {\n    if (noteWrapperElement === undefined)\n        return;\n    const index = (0, main_1.GetPageNotes)().indexOf(noteWrapperElement);\n    (0, main_1.GetPageNotes)().splice(index, 1);\n    noteWrapperElement.wrapperHTML.remove();\n};\nexports.deleteNote = deleteNote;\nconst toggleNote = (element, hideNotes) => {\n    if (element === undefined)\n        return;\n    if (hideNotes)\n        element.classList.add(\"closedOverlay\");\n    else\n        element.classList.remove(\"closedOverlay\");\n};\nexports.toggleNote = toggleNote;\nconst setAllNotesDisplay = (hideNotesBoolean) => {\n    if ((0, noteDisplayOverlay_1.GetCurrentNoteOverlayStyle)() === noteDisplayOverlay_1.ENoteOverlayStyle.sidebar) {\n        (0, noteDisplayOverlay_1.ToggleSideBar)(hideNotesBoolean);\n    }\n    else {\n        const pageNotes = (0, main_1.GetPageNotes)();\n        if (pageNotes.length <= 0)\n            return;\n        for (const note of pageNotes) {\n            (0, exports.toggleNote)(note.textAreaHTML, hideNotesBoolean);\n        }\n    }\n};\nexports.setAllNotesDisplay = setAllNotesDisplay;\nconst createNoteForSelectedText = () => {\n    var _a;\n    if (window.getSelection) {\n        const sel = window.getSelection();\n        //check if anything is selected\n        if (sel && sel.rangeCount) {\n            //get starting container of selection\n            const start = sel.getRangeAt(0).startContainer.parentElement;\n            //get ending container - set to start if ending container does not exist\n            let end = (_a = sel.getRangeAt(0).endContainer) === null || _a === void 0 ? void 0 : _a.parentElement;\n            if (!end)\n                end = sel.getRangeAt(0).startContainer.parentElement;\n            if (!start || !end)\n                return;\n            const width = (0, exports.calculateNoteWidthInPx)(start, end);\n            const height = (0, exports.calculateNoteHeightInPx)(start, end);\n            const left = start.getBoundingClientRect().left + window.scrollX + \"px\";\n            const top = (0, noteDisplayOverlay_1.GetCurrentNoteOverlayStyle)() === noteDisplayOverlay_1.ENoteOverlayStyle.sidebar\n                ? start.getBoundingClientRect().top + \"px\"\n                : start.getBoundingClientRect().top + window.scrollY + \"px\";\n            const NoteObject = (0, HTMLCreator_1.createNewNoteHTML)(width, height, left, top, \"\");\n            NoteObject.startContainerHTML = start;\n            NoteObject.endContainerHTML = end;\n            (0, main_1.GetPageNotes)().push(NoteObject);\n            if ((0, noteDisplayOverlay_1.GetCurrentNoteOverlayStyle)() === noteDisplayOverlay_1.ENoteOverlayStyle.sidebar)\n                (0, noteDisplayOverlay_1.GetSideBar)().appendChild(NoteObject.wrapperHTML);\n            else\n                document.body.appendChild(NoteObject.wrapperHTML);\n        }\n    }\n    return null;\n};\nexports.createNoteForSelectedText = createNoteForSelectedText;\nconst calculateNoteHeightInPx = (startNode, endNode) => {\n    const top = startNode.getBoundingClientRect().top + window.scrollY;\n    const bottom = endNode.getBoundingClientRect().bottom + window.scrollY;\n    return bottom - top + \"px\";\n};\nexports.calculateNoteHeightInPx = calculateNoteHeightInPx;\nconst calculateNoteWidthInPx = (startNode, endNode) => {\n    const startWidth = startNode.getBoundingClientRect().width;\n    const endWidth = endNode.getBoundingClientRect().width;\n    return Math.max(startWidth, endWidth) + \"px\";\n};\nexports.calculateNoteWidthInPx = calculateNoteWidthInPx;\nconst convertAbsoluteToRelativePosition = (Note, newParent) => {\n    const parentTop = newParent.getBoundingClientRect().top;\n    const relativeTop = parseInt(Note.top) - parentTop;\n    Note.wrapperHTML.style.top = relativeTop + \"px\";\n};\nexports.convertAbsoluteToRelativePosition = convertAbsoluteToRelativePosition;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EMessageTypes = void 0;\nvar EMessageTypes;\n(function (EMessageTypes) {\n    EMessageTypes[EMessageTypes[\"overlay\"] = 0] = \"overlay\";\n    EMessageTypes[EMessageTypes[\"sidebar\"] = 1] = \"sidebar\";\n    EMessageTypes[EMessageTypes[\"create\"] = 2] = \"create\";\n    EMessageTypes[EMessageTypes[\"none\"] = 3] = \"none\";\n})(EMessageTypes || (exports.EMessageTypes = EMessageTypes = {}));\n","\"use strict\";\n//current limitations:\n//If you selected 3 containers and the center one is wider then both of them the note box will not  account for that\n//Box will span the entire element the text is in.\n//will break if page is reloaded in different size\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pageNotes = exports.GetPageNotes = void 0;\nconst noteDisplayOverlay_1 = require(\"./noteDisplayOverlay\");\nconst NoteManager_1 = require(\"./NoteManager\");\nconst Types_1 = require(\"./Types\");\n//contains html elements for the notes.\nconst pageNotes = [];\nexports.pageNotes = pageNotes;\nconst GetPageNotes = () => {\n    return pageNotes;\n};\nexports.GetPageNotes = GetPageNotes;\n(0, noteDisplayOverlay_1.GetSideBar)();\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    const message = JSON.parse(request);\n    if (message.type === Types_1.EMessageTypes.overlay) {\n        console.log(\"overlay\");\n        (0, noteDisplayOverlay_1.ChangeOverlayStyle)(noteDisplayOverlay_1.ENoteOverlayStyle.overlay);\n    }\n    else if (message.type === Types_1.EMessageTypes.sidebar) {\n        console.log(\"side\");\n        (0, noteDisplayOverlay_1.ChangeOverlayStyle)(noteDisplayOverlay_1.ENoteOverlayStyle.sidebar);\n    }\n    else if (message.type === Types_1.EMessageTypes.create) {\n        console.log(\"create\");\n        (0, NoteManager_1.createNoteForSelectedText)();\n    }\n});\n// addEventListener(\"beforeunload \", () => {\n//   unloadEvent();\n// });\n// const unloadEvent = () => {\n//   if (pageNotes.length > 0) {\n//     const noteStyles = [];\n//     for (const el of pageNotes) {\n//       noteStyles.push(convertStyleToJson(el));\n//     }\n//     localStorage.setItem(\"Notes\", JSON.stringify(noteStyles));\n//   }\n// };\n// const convertStyleToJson = (element) => {\n//   return JSON.stringify({\n//     width: element.style.width,\n//     height: element.style.height,\n//     top: element.style.top,\n//     left: element.style.left,\n//     content: element.value,\n//   });\n// };\n//TODO Reimplement\n// const elementStyleString = localStorage.getItem(\"Notes\");\n// if (elementStyleString) {\n//   const styleArray = JSON.parse(elementStyleString);\n//   for (const el of styleArray) {\n//     {\n//       const style = JSON.parse(el);\n//       const element = createNewNote(\n//         style.width,\n//         style.height,\n//         style.left,\n//         style.top,\n//         style.content\n//       );\n//       document.body.appendChild(element);\n//     }\n//   }\n// }\ndocument.body.onkeydown = (e) => {\n    if (e.key === \"=\")\n        (0, NoteManager_1.createNoteForSelectedText)();\n    if (e.key === \"4\")\n        (0, noteDisplayOverlay_1.ChangeOverlayStyle)(noteDisplayOverlay_1.ENoteOverlayStyle.overlay);\n    if (e.key === \"5\")\n        (0, noteDisplayOverlay_1.ChangeOverlayStyle)(noteDisplayOverlay_1.ENoteOverlayStyle.sidebar);\n    if (e.key === \"2\")\n        (0, NoteManager_1.setAllNotesDisplay)(false);\n    if (e.key === \"3\")\n        (0, NoteManager_1.setAllNotesDisplay)(true);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ToggleSideBar = exports.ChangeOverlayStyle = exports.GetCurrentNoteOverlayStyle = exports.ENoteOverlayStyle = exports.GetSideBar = void 0;\nconst HTMLCreator_1 = require(\"./HTMLCreator\");\nconst main_1 = require(\"./main\");\nconst resize_1 = require(\"./resize\");\nlet sidebar;\nconst CreateSideBar = () => {\n    sidebar = document.createElement(\"div\");\n    sidebar.classList.add(\"NoteSideBar\");\n    if (currentNoteOverlayStyle === ENoteOverlayStyle.overlay)\n        (0, exports.ToggleSideBar)(true);\n    document.body.appendChild(sidebar);\n};\nconst GetSideBar = () => {\n    if (!sidebar)\n        CreateSideBar();\n    return sidebar;\n};\nexports.GetSideBar = GetSideBar;\nvar ENoteOverlayStyle;\n(function (ENoteOverlayStyle) {\n    ENoteOverlayStyle[ENoteOverlayStyle[\"overlay\"] = 0] = \"overlay\";\n    ENoteOverlayStyle[ENoteOverlayStyle[\"sidebar\"] = 1] = \"sidebar\";\n})(ENoteOverlayStyle || (exports.ENoteOverlayStyle = ENoteOverlayStyle = {}));\nlet currentNoteOverlayStyle = ENoteOverlayStyle.overlay;\nconst GetCurrentNoteOverlayStyle = () => {\n    return currentNoteOverlayStyle;\n};\nexports.GetCurrentNoteOverlayStyle = GetCurrentNoteOverlayStyle;\nconst ChangeOverlayStyle = (newStyle) => {\n    currentNoteOverlayStyle = newStyle;\n    for (const note of (0, main_1.GetPageNotes)()) {\n        (0, HTMLCreator_1.SetHTMLClasses)(note, (0, exports.GetCurrentNoteOverlayStyle)());\n        if (newStyle === ENoteOverlayStyle.overlay) {\n            document.body.appendChild(note.wrapperHTML);\n            (0, exports.ToggleSideBar)(true);\n        }\n        else {\n            (0, exports.GetSideBar)().appendChild(note.wrapperHTML);\n            (0, exports.ToggleSideBar)(false);\n        }\n    }\n    (0, resize_1.ResizeAllElements)();\n};\nexports.ChangeOverlayStyle = ChangeOverlayStyle;\nconst ToggleSideBar = (hideSideBar) => {\n    if (hideSideBar)\n        (0, exports.GetSideBar)().classList.add(\"closed\");\n    else\n        (0, exports.GetSideBar)().classList.remove(\"closed\");\n};\nexports.ToggleSideBar = ToggleSideBar;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResizeAllElements = void 0;\nconst main_1 = require(\"./main\");\nconst noteDisplayOverlay_1 = require(\"./noteDisplayOverlay\");\nconst NoteManager_1 = require(\"./NoteManager\");\nconst onPageScroll = () => {\n    if ((0, noteDisplayOverlay_1.GetCurrentNoteOverlayStyle)() === noteDisplayOverlay_1.ENoteOverlayStyle.overlay)\n        return;\n    const notes = (0, main_1.GetPageNotes)();\n    for (const note of notes) {\n        if (!note.startContainerHTML || !note.endContainerHTML)\n            continue;\n        const top = note.startContainerHTML.getBoundingClientRect().top + \"px\";\n        note.top = top;\n        (0, NoteManager_1.convertAbsoluteToRelativePosition)(note, (0, noteDisplayOverlay_1.GetSideBar)());\n    }\n};\nconst ResizeAllElements = () => {\n    if ((0, main_1.GetPageNotes)().length <= 0)\n        return;\n    for (const el of (0, main_1.GetPageNotes)()) {\n        if (!el.startContainerHTML || !el.endContainerHTML)\n            continue;\n        const top = (0, noteDisplayOverlay_1.GetCurrentNoteOverlayStyle)() === noteDisplayOverlay_1.ENoteOverlayStyle.sidebar\n            ? el.startContainerHTML.getBoundingClientRect().top + \"px\"\n            : el.startContainerHTML.getBoundingClientRect().top +\n                window.scrollY +\n                \"px\";\n        el.wrapperHTML.style.top = top;\n        if ((0, noteDisplayOverlay_1.GetCurrentNoteOverlayStyle)() === noteDisplayOverlay_1.ENoteOverlayStyle.sidebar) {\n            continue;\n        }\n        const height = (0, NoteManager_1.calculateNoteHeightInPx)(el.startContainerHTML, el.endContainerHTML);\n        const width = (0, NoteManager_1.calculateNoteWidthInPx)(el.startContainerHTML, el.endContainerHTML);\n        const left = el.startContainerHTML.getBoundingClientRect().left +\n            window.scrollX +\n            \"px\";\n        el.wrapperHTML.style.left = left;\n        el.wrapperHTML.style.width = width;\n        el.wrapperHTML.style.height = height;\n    }\n};\nexports.ResizeAllElements = ResizeAllElements;\naddEventListener(\"resize\", () => {\n    (0, exports.ResizeAllElements)();\n});\naddEventListener(\"scroll\", () => {\n    onPageScroll();\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(927);\n__webpack_require__(79);\n__webpack_require__(926);\n__webpack_require__(716);\n__webpack_require__(591);\nvar __webpack_exports__ = __webpack_require__(853);\n"],"names":["Object","defineProperty","exports","value","createNewNoteHTML","SetHTMLClasses","main_1","noteDisplayOverlay_1","NoteManager_1","note","CurrentNoteOverlayStyle","trashIconHTML","className","noteIconHTML","textAreaHTML","wrapperHTML","style","cssText","classList","add","GetPageNotes","length","ENoteOverlayStyle","sidebar","width","height","left","top","content","Note","wrapper","document","createElement","noteIcon","trashIcon","textArea","addEventListener","deleteNote","toggle","contains","toggleNote","e","innerHTML","target","appendChild","GetCurrentNoteOverlayStyle","convertAbsoluteToRelativePosition","calculateNoteWidthInPx","calculateNoteHeightInPx","createNoteForSelectedText","setAllNotesDisplay","HTMLCreator_1","noteWrapperElement","undefined","index","indexOf","splice","remove","element","hideNotes","hideNotesBoolean","ToggleSideBar","pageNotes","_a","window","getSelection","sel","rangeCount","start","getRangeAt","startContainer","parentElement","end","endContainer","getBoundingClientRect","scrollX","scrollY","NoteObject","startContainerHTML","endContainerHTML","push","GetSideBar","body","startNode","endNode","bottom","startWidth","endWidth","Math","max","newParent","parentTop","relativeTop","parseInt","EMessageTypes","Types_1","chrome","runtime","onMessage","addListener","request","sender","sendResponse","message","JSON","parse","type","overlay","console","log","ChangeOverlayStyle","create","onkeydown","key","resize_1","currentNoteOverlayStyle","newStyle","ResizeAllElements","hideSideBar","el","notes","onPageScroll","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__"],"sourceRoot":""}