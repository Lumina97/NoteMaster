(()=>{"use strict";var e={927:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNoteWidthInPx=t.calculateNoteHeightInPx=t.pageNotes=t.SetHTMLClasses=t.GetPageNotes=void 0;const r=n(716),a=[];t.pageNotes=a,t.GetPageNotes=()=>a,(0,r.GetSideBar)();const o=(e,t)=>{if(void 0!==e)if(void 0!==t)e.style.display=t?"block":"none";else{const t=e.style.display;e.style.display="none"===t?"block":"none"}},l=e=>{if((0,r.GetCurrentNoteOverlayStyle)()===r.ENoteOverlayStyle.sidebar){if((0,r.ToggleSideBar)(e),a.length<=0)return;for(const t of a)o(t.wrapperHTML,e)}if(!(a.length<=0))for(const t of a)o(t.textAreaHTML,e)};t.SetHTMLClasses=e=>{e.trashIconHTML.className="",e.noteIconHTML.className="",e.textAreaHTML.className="",e.wrapperHTML.className="",e.wrapperHTML.style.cssText="",e.trashIconHTML.classList.add((0,r.GetCurrentNoteOverlayStyle)()===r.ENoteOverlayStyle.sidebar?"noteTrashIconSideBar":"noteTrashIcon"),e.noteIconHTML.classList.add((0,r.GetCurrentNoteOverlayStyle)()===r.ENoteOverlayStyle.sidebar?"noteDisplayIconSideBar":"noteDisplayIcon"),e.textAreaHTML.classList.add((0,r.GetCurrentNoteOverlayStyle)()===r.ENoteOverlayStyle.sidebar?"noteTextAreaSideBar":"noteTextArea"),e.wrapperHTML.classList.add(`Note${a.length}`,(0,r.GetCurrentNoteOverlayStyle)()===r.ENoteOverlayStyle.sidebar?"noteWrapperElementSideBar":"noteWrapperElement"),(0,r.GetCurrentNoteOverlayStyle)()===r.ENoteOverlayStyle.overlay&&(e.wrapperHTML.style.width=e.width,e.wrapperHTML.style.height=e.height,e.wrapperHTML.style.left=e.left),e.wrapperHTML.style.top=e.top};document.body.onkeydown=e=>{"="===e.key&&d(),"4"===e.key&&(0,r.ChangeOverlayStyle)(r.ENoteOverlayStyle.overlay),"5"===e.key&&(0,r.ChangeOverlayStyle)(r.ENoteOverlayStyle.sidebar),"2"===e.key&&l(!1),"3"===e.key&&l(!0)};const s=(e,t)=>{const n=e.getBoundingClientRect().top+window.scrollY;return t.getBoundingClientRect().bottom+window.scrollY-n+"px"};t.calculateNoteHeightInPx=s;const i=(e,t)=>{const n=e.getBoundingClientRect().width,r=t.getBoundingClientRect().width;return Math.max(n,r)+"px"};t.calculateNoteWidthInPx=i;const d=()=>{var e;if(window.getSelection){const n=window.getSelection();if(n&&n.rangeCount){const r=n.getRangeAt(0).startContainer.parentElement;let l=null===(e=n.getRangeAt(0).endContainer)||void 0===e?void 0:e.parentElement;if(l||(l=n.getRangeAt(0).startContainer.parentElement),!r||!l)return;const d=((e,n,r,l,s)=>{let i;const d=document.createElement("div"),c=document.createElement("button"),y=document.createElement("button"),p=document.createElement("textarea");return p.value=s||"Enter your note here",y.addEventListener("click",(()=>{(e=>{if(void 0===e)return;const t=a.indexOf(e);a.splice(t,1),e.wrapperHTML.remove()})(i)})),c.addEventListener("click",(()=>{o(p)})),p.addEventListener("change",(e=>{p.innerHTML=e.target.value})),d.appendChild(c),d.appendChild(y),d.appendChild(p),i={width:e,height:n,top:l,left:r,content:p.value,wrapperHTML:d,textAreaHTML:p,noteIconHTML:c,trashIconHTML:y},(0,t.SetHTMLClasses)(i),i})(i(r,l),s(r,l),r.getBoundingClientRect().left+window.scrollX+"px",r.getBoundingClientRect().top+window.scrollY+"px","");d.startContainerHTML=r,d.endContainerHTML=l,a.push(d),document.body.appendChild(d.wrapperHTML)}}return null}},716:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleSideBar=t.ChangeOverlayStyle=t.GetCurrentNoteOverlayStyle=t.ENoteOverlayStyle=t.GetSideBar=void 0;const r=n(927),a=n(926);let o;var l;t.GetSideBar=()=>(o||(o=document.createElement("div"),o.classList.add("NoteSideBar","show"),document.body.appendChild(o),console.log("Created sidebar")),o),function(e){e[e.overlay=0]="overlay",e[e.sidebar=1]="sidebar"}(l||(t.ENoteOverlayStyle=l={}));let s=l.sidebar;t.GetCurrentNoteOverlayStyle=()=>s,t.ChangeOverlayStyle=e=>{s=e;for(const e of(0,r.GetPageNotes)())(0,r.SetHTMLClasses)(e);(0,a.ResizeAllElements)()},t.ToggleSideBar=e=>{e?(0,t.GetSideBar)().classList.add("show"):(0,t.GetSideBar)().classList.remove("show")}},461:(e,t)=>{},926:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeAllElements=void 0;const r=n(927),a=n(716);t.ResizeAllElements=()=>{if(!((0,r.GetPageNotes)().length<=0))for(const e of(0,r.GetPageNotes)()){if(!e.startContainerHTML||!e.endContainerHTML)continue;const t=e.startContainerHTML.getBoundingClientRect().top+window.scrollY+"px";if(e.wrapperHTML.style.top=t,(0,a.GetCurrentNoteOverlayStyle)()===a.ENoteOverlayStyle.sidebar)continue;const n=(0,r.calculateNoteHeightInPx)(e.startContainerHTML,e.endContainerHTML),o=(0,r.calculateNoteWidthInPx)(e.startContainerHTML,e.endContainerHTML),l=e.startContainerHTML.getBoundingClientRect().left+window.scrollX+"px";e.wrapperHTML.style.left=l,e.wrapperHTML.style.width=o,e.wrapperHTML.style.height=n}},addEventListener("resize",(()=>{(0,t.ResizeAllElements)()}))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n(927),n(461),n(926),n(716)})();
//# sourceMappingURL=content.js.map