(()=>{"use strict";var e={591:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNewNoteHTML=t.SetHTMLClasses=void 0;const a=o(927),r=o(716),n=o(79);t.SetHTMLClasses=(e,t)=>{e.trashIconHTML.className="",e.noteIconHTML.className="",e.textAreaHTML.className="",e.wrapperHTML.className="",e.wrapperHTML.style.cssText="",e.wrapperHTML.classList.add(`Note${(0,a.GetPageNotes)().length}`),t===r.ENoteOverlayStyle.sidebar?(e.trashIconHTML.classList.add("noteTrashIconSideBar"),e.noteIconHTML.classList.add("noteDisplayIconSideBar"),e.textAreaHTML.classList.add("noteTextAreaSideBar"),e.wrapperHTML.classList.add("noteWrapperElementSideBar")):(e.trashIconHTML.classList.add("noteTrashIcon"),e.noteIconHTML.classList.add("noteDisplayIcon"),e.textAreaHTML.classList.add("noteTextArea"),e.wrapperHTML.classList.add("noteWrapperElement"),e.wrapperHTML.style.width=e.width,e.wrapperHTML.style.height=e.height,e.wrapperHTML.style.left=e.left),e.wrapperHTML.style.top=e.top},t.createNewNoteHTML=(e,o,a,l,s)=>{let i;const d=document.createElement("div"),c=document.createElement("button"),p=document.createElement("button"),y=document.createElement("textarea");return y.value=s||"Enter your note here",p.addEventListener("click",(()=>{(0,n.deleteNote)(i)})),c.addEventListener("click",(()=>{const e=y.classList.contains("closedOverlay");(0,n.toggleNote)(y,!e)})),y.addEventListener("change",(e=>{y.innerHTML=e.target.value})),d.appendChild(c),d.appendChild(p),d.appendChild(y),i={width:e,height:o,top:l,left:a,content:y.value,wrapperHTML:d,textAreaHTML:y,noteIconHTML:c,trashIconHTML:p},(0,t.SetHTMLClasses)(i,(0,r.GetCurrentNoteOverlayStyle)()),i}},79:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertAbsoluteToRelativePosition=t.calculateNoteWidthInPx=t.calculateNoteHeightInPx=t.createNoteForSelectedText=t.setAllNotesDisplay=t.toggleNote=t.deleteNote=void 0;const a=o(591),r=o(927),n=o(716);t.deleteNote=e=>{if(void 0===e)return;const t=(0,r.GetPageNotes)().indexOf(e);(0,r.GetPageNotes)().splice(t,1),e.wrapperHTML.remove()},t.toggleNote=(e,t)=>{void 0!==e&&(t?e.classList.add("closedOverlay"):e.classList.remove("closedOverlay"))},t.setAllNotesDisplay=e=>{if((0,n.GetCurrentNoteOverlayStyle)()===n.ENoteOverlayStyle.sidebar)(0,n.ToggleSideBar)(e);else{const o=(0,r.GetPageNotes)();if(o.length<=0)return;for(const a of o)(0,t.toggleNote)(a.textAreaHTML,e)}},t.createNoteForSelectedText=()=>{var e;if(window.getSelection){const o=window.getSelection();if(o&&o.rangeCount){const l=o.getRangeAt(0).startContainer.parentElement;let s=null===(e=o.getRangeAt(0).endContainer)||void 0===e?void 0:e.parentElement;if(s||(s=o.getRangeAt(0).startContainer.parentElement),!l||!s)return;const i=(0,t.calculateNoteWidthInPx)(l,s),d=(0,t.calculateNoteHeightInPx)(l,s),c=l.getBoundingClientRect().left+window.scrollX+"px",p=(0,n.GetCurrentNoteOverlayStyle)()===n.ENoteOverlayStyle.sidebar?l.getBoundingClientRect().top+"px":l.getBoundingClientRect().top+window.scrollY+"px",y=(0,a.createNewNoteHTML)(i,d,c,p,"");y.startContainerHTML=l,y.endContainerHTML=s,(0,r.GetPageNotes)().push(y),(0,n.GetCurrentNoteOverlayStyle)()===n.ENoteOverlayStyle.sidebar?(0,n.GetSideBar)().appendChild(y.wrapperHTML):document.body.appendChild(y.wrapperHTML)}}return null},t.calculateNoteHeightInPx=(e,t)=>{const o=e.getBoundingClientRect().top+window.scrollY;return t.getBoundingClientRect().bottom+window.scrollY-o+"px"},t.calculateNoteWidthInPx=(e,t)=>{const o=e.getBoundingClientRect().width,a=t.getBoundingClientRect().width;return Math.max(o,a)+"px"},t.convertAbsoluteToRelativePosition=(e,t)=>{const o=t.getBoundingClientRect().top,a=parseInt(e.top)-o;e.wrapperHTML.style.top=a+"px"}},853:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.EMessageTypes=void 0,function(e){e[e.overlay=0]="overlay",e[e.sidebar=1]="sidebar",e[e.create=2]="create",e[e.none=3]="none"}(o||(t.EMessageTypes=o={}))},927:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pageNotes=t.GetPageNotes=void 0;const a=o(716),r=o(79),n=o(853),l=[];t.pageNotes=l,t.GetPageNotes=()=>l,(0,a.GetSideBar)(),chrome.runtime.onMessage.addListener(((e,t,o)=>{const l=JSON.parse(e);l.type===n.EMessageTypes.overlay?(console.log("overlay"),(0,a.ChangeOverlayStyle)(a.ENoteOverlayStyle.overlay)):l.type===n.EMessageTypes.sidebar?(console.log("side"),(0,a.ChangeOverlayStyle)(a.ENoteOverlayStyle.sidebar)):l.type===n.EMessageTypes.create&&(console.log("create"),(0,r.createNoteForSelectedText)())})),document.body.onkeydown=e=>{"="===e.key&&(0,r.createNoteForSelectedText)(),"4"===e.key&&(0,a.ChangeOverlayStyle)(a.ENoteOverlayStyle.overlay),"5"===e.key&&(0,a.ChangeOverlayStyle)(a.ENoteOverlayStyle.sidebar),"2"===e.key&&(0,r.setAllNotesDisplay)(!1),"3"===e.key&&(0,r.setAllNotesDisplay)(!0)}},716:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleSideBar=t.ChangeOverlayStyle=t.GetCurrentNoteOverlayStyle=t.ENoteOverlayStyle=t.GetSideBar=void 0;const a=o(591),r=o(927),n=o(926);let l;var s;t.GetSideBar=()=>(l||(l=document.createElement("div"),l.classList.add("NoteSideBar"),i===s.overlay&&(0,t.ToggleSideBar)(!0),document.body.appendChild(l)),l),function(e){e[e.overlay=0]="overlay",e[e.sidebar=1]="sidebar"}(s||(t.ENoteOverlayStyle=s={}));let i=s.overlay;t.GetCurrentNoteOverlayStyle=()=>i,t.ChangeOverlayStyle=e=>{i=e;for(const o of(0,r.GetPageNotes)())(0,a.SetHTMLClasses)(o,(0,t.GetCurrentNoteOverlayStyle)()),e===s.overlay?(document.body.appendChild(o.wrapperHTML),(0,t.ToggleSideBar)(!0)):((0,t.GetSideBar)().appendChild(o.wrapperHTML),(0,t.ToggleSideBar)(!1));(0,n.ResizeAllElements)()},t.ToggleSideBar=e=>{e?(0,t.GetSideBar)().classList.add("closed"):(0,t.GetSideBar)().classList.remove("closed")}},926:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeAllElements=void 0;const a=o(927),r=o(716),n=o(79);t.ResizeAllElements=()=>{if(!((0,a.GetPageNotes)().length<=0))for(const e of(0,a.GetPageNotes)()){if(!e.startContainerHTML||!e.endContainerHTML)continue;const t=(0,r.GetCurrentNoteOverlayStyle)()===r.ENoteOverlayStyle.sidebar?e.startContainerHTML.getBoundingClientRect().top+"px":e.startContainerHTML.getBoundingClientRect().top+window.scrollY+"px";if(e.wrapperHTML.style.top=t,(0,r.GetCurrentNoteOverlayStyle)()===r.ENoteOverlayStyle.sidebar)continue;const o=(0,n.calculateNoteHeightInPx)(e.startContainerHTML,e.endContainerHTML),a=(0,n.calculateNoteWidthInPx)(e.startContainerHTML,e.endContainerHTML),l=e.startContainerHTML.getBoundingClientRect().left+window.scrollX+"px";e.wrapperHTML.style.left=l,e.wrapperHTML.style.width=a,e.wrapperHTML.style.height=o}},addEventListener("resize",(()=>{(0,t.ResizeAllElements)()})),addEventListener("scroll",(()=>{(()=>{if((0,r.GetCurrentNoteOverlayStyle)()===r.ENoteOverlayStyle.overlay)return;const e=(0,a.GetPageNotes)();for(const t of e){if(!t.startContainerHTML||!t.endContainerHTML)continue;const e=t.startContainerHTML.getBoundingClientRect().top+"px";t.top=e,(0,n.convertAbsoluteToRelativePosition)(t,(0,r.GetSideBar)())}})()}))}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,o),n.exports}o(927),o(79),o(926),o(716),o(591),o(853)})();
//# sourceMappingURL=content.js.map